if(typeof(mlog)==="undefined"){var mlog=function(){}}$.extend(mlog,{getCursorEndPosition:function(a){a.focus();if(a.setSelectionRange){return a.selectionEnd}else{if(document.selection){var b=0,c=document.selection.createRange(),d=document.body.createTextRange();d.moveToElementText(a);c.getBookmark();for(b=0;d.compareEndPoints("StartToStart",c)<0&&c.moveStart("character",-1)!==0;b++){if(a.value.charAt(b)=="\n"){b++}}return b}}},insertEmotions:function(a){var b=this;if(a===undefined){a=""}$("#emotions"+a+" span").click(function(){var g=$("#comment"+a);var e=b.getCursorEndPosition(g[0]);var d="["+this.className+"]",c=g[0].value;c=c.substring(0,e)+d+c.substring(e,c.length);$("#comment"+a).val(c);if($.browser.msie){e-=c.split("\n").length-1;var f=g[0].createTextRange();f.collapse(true);f.moveStart("character",e+6);f.select()}else{g[0].setSelectionRange(e+6,e+6)}})},replaceCommentsEm:function(a){var e=this;var d=$(a);for(var b=0;b<d.length;b++){var c=d[b].innerHTML;d[b].innerHTML=e.replaceEmString(c)}},replaceEmString:function(d){var e=this;var c=d.split("[em");if(c.length===1){return d}d=e._processEm(c[0]);if($.trim(c[0])===""){d=""}for(var a=1;a<c.length;a++){var b=c[a].substr(0,2);d+="<span class='em"+b+"'></span>"+this._processEm(c[a].slice(3))}return d+"<div class='clear'></div>"},_processEm:function(f){if(f.replace(/\s/g,"")===""){return""}var e=[],c="",d=["<br>","<br/>","<BR>","<BR/>"];for(var a=0;a<d.length;a++){if(f.indexOf(d[a])>-1){e=f.split(d[a])}}if(e.length===0){return"<span class='em-span'>"+f+"</span>"}for(var b=0;b<e.length;b++){c+="<span class='em-span'>"+e[b]+"</span>";if(b!==e.length-1){c+="<br class='em-br'>"}}return c},initSyntaxHighlighter:function(b){for(var a=0;a<b.length;a++){switch(b[a]){case"groovy":b[a]="groovy				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushGroovy.js";break;case"java":b[a]="java				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushJava.js";break;case"php":b[a]="php				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushPhp.js";break;case"scala":b[a]="scala				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushScala.js";break;case"sql":b[a]="sql				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushSql.js";break;case"applescript":b[a]="applescript			"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushAppleScript.js";break;case"as3":case"actionscript3":b[a]="actionscript3 as3                  "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushAS3.js";break;case"bash":case"shell":b[a]="bash shell                         "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushBash.js";break;case"coldfusion":case"cf":b[a]="coldfusion cf			"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushColdFusion.js";break;case"c#":case"c-sharp":case"csharp":b[a]="c# c-sharp csharp                  "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushCSharp.js";break;case"cpp":case"c":b[a]="cpp c				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushCpp.js";break;case"css":b[a]="css				"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushCss.js";break;case"delphi":case"pascal":b[a]="delphi pascal			"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushDelphi.js";break;case"diff":case"patch":case"pas":b[a]="diff patch pas			"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushDiff.js";break;case"erl":case"erlang":b[a]="erl erlang                         "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushErlang.js";break;case"js":case"jscript":case"javascript":b[a]="js jscript javascript              "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushJScript.js";break;case"jfx":case"javafx":b[a]="jfx javafx                 	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushJavaFX.js";break;case"perl":case"pl":b[a]="perl pl                    	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushPerl.js";break;case"plain":case"text":b[a]="text plain                 	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushPlain.js";break;case"ps":case"powershell":b[a]="ps powershell                      "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushPowerShell.js";break;case"py":case"python":b[a]="py python                          "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushPython.js";break;case"rails":case"ror":case"ruby":case"rb":b[a]="ruby rails ror rb          	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushRuby.js";break;case"sass":case"scss":b[a]="sass scss                  	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushSass.js";break;case"vb":case"vbnet":b[a]="vb vbnet                   	"+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushVb.js";break;case"xml":case"xhtml":case"xslt":case"html":b[a]="xml xhtml xslt html                "+mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushXml.js";
break;default:break}}SyntaxHighlighter.autoloader.apply(null,b);SyntaxHighlighter.config.stripBrs=true;SyntaxHighlighter.all()},loadSyntaxHighlighter:function(b,a){var d=b?b:"shCoreEclipse";var c=this;mlog.utils.loader.loadStyleSheet(mlog.variable.base+"/script/SyntaxHighlighter/styles/"+d+".css");mlog.utils.loader.loadJavaScriptByAjax({url:mlog.variable.base+"/script/SyntaxHighlighter/scripts/shCore.js",success:function(){var f=[],e=false;$(a).each(function(){var g=this.className.split(";")[0];var h=g.substr(7,g.length-1);if(this.className.indexOf("html-script: true")>-1&&(h!=="xml"&&h!=="xhtml"&&h!=="xslt"&&h!="html")){e=true}f.push(h)});if(e){mlog.utils.loader.loadJavaScriptByAjax({url:mlog.variable.base+"/script/SyntaxHighlighter/scripts/shBrushXml.js",success:function(){c.initSyntaxHighlighter(f)}})}else{c.initSyntaxHighlighter(f)}}})},parseLanguage:function(e){var d=false;var b=false;var a=e?(e.contentSelector?e.contentSelector:".content"):".content";a=a+" pre";$(a).each(function(){if(this.className.indexOf("brush")>-1){b=true}if(this.className.indexOf("prettyprint")>-1){d=true}});if(b){var c=e?(e.SHTheme?e.SHTheme:undefined):undefined;this.loadSyntaxHighlighter(c,a)}if(d){mlog.utils.loader.loadStyleSheet(mlog.variable.base+"/script/prettify/prettify.css");mlog.utils.loader.loadJavaScriptByAjax({url:mlog.variable.base+"/script/prettify/prettify.js"});$(document).ready(function(){prettyPrint()})}},initEditor:function(a){var b=this;if(typeof(mlog.editor)==="undefined"){mlog.utils.loader.loadJavaScript(mlog.variable.base+"/script/mlog.editor.js",function(){mlog.editor.init({id:a.selector,width:a.width,height:a.height,model:"simple"})})}else{mlog.editor.init({id:a.selector,width:a.width,height:a.height,model:"simple"})}},reply:function(){},load:function(a){var b=this;b.parseLanguage(a)},autoLoad:function(){var a=this;a.insertEmotions()}});$(document).ready(function(){mlog.autoLoad()});